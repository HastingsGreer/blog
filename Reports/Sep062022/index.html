<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/tufte.css"> <link rel=stylesheet  href="/css/latex.css"> <link rel=stylesheet  href="/css/adjust.css"> <link rel=icon  href="/assets/favicon.png"> <title>eval of ants brain reg</title> <div id=layout > <div id=menu > <ul> <li><a href="/">Home</a> <!-- <li><a href="/FeatureMapICON/">Feature Map Inverse Consistency</a> --> <li><a href="/HatTile/">Aperiodic Tiling with Z3</a> <li><a href="/ICON/">Inverse Consistent Regstration</a> <li><a href="/Mandelbrot/">Mandelbrot Set Adventures</a> <li><a href="/BadMatrixMultiply/">Bad Matrix Multiplication</a> <li><a href="/GameJam/">Game Jam Games</a> <li><a href="/menu3/">Tags</a> </ul> </div> <div id=main > <div class=franklin-content ><img src="/assets/Reports/header.jpeg" alt=""> <h1 id=brain_work ><a href="#brain_work" class=header-anchor >Brain work</a></h1> <p>First discovery: I trained on T1w/T1w&#95;acpc&#95;dc, they registered T1w&#95;acpc&#95;dc&#95;restore. This is fine for eval since I have both types for all images, but is a problem for fair comparison: my library is getting a huge advantage by operating on skull stripped images. In addition, this means I can&#39;t just use their atlas- will have to build my own to do a completely fair comparison.</p> <p>I have sent email asking why they are not skull stripping- perhaps they have an excellent reason and I need to retrain with skulls, or perhaps they should just stick to ants and add a stripping step. Hard to say without more information.</p> <p>Evalutation methodology: To get a DICE score for their current approach for a pair of images, I warp both segmentations to their atlas using the script they sent, then calculate DICE</p> <p>To get a DICE score for ICON for a pair of images, I warp the segmentation from one to the other image, then calculate DICE. This will change once I have an ICON atlas built in the next few days.</p> <p>Noting that this comparison is not fair in the above ways, it looks like ICON performs significantly better than their current approach. On 20 random pairs:</p> <p><a href="https://github.com/uncbiag/ICON/blob/a91913935b6b2f1e450526d200b9a806ea3d3bcd/notebooks/brain_ants_comparison.ipynb">notebook</a></p> <pre><code class="julia hljs">icon <span class=hljs-number >0.7813606001925126</span>
ants <span class=hljs-number >0.7789688449216076</span>
icon <span class=hljs-number >0.8112338874457518</span>
ants <span class=hljs-number >0.7376296535317746</span>
icon <span class=hljs-number >0.7510346383760416</span>
ants <span class=hljs-number >0.7248291495038647</span>
icon <span class=hljs-number >0.7700213136841512</span>
ants <span class=hljs-number >0.7562280845695204</span>
icon <span class=hljs-number >0.7853846289592757</span>
ants <span class=hljs-number >0.7274173689692469</span>
icon <span class=hljs-number >0.7979605680416916</span>
ants <span class=hljs-number >0.7789420158351252</span>
icon <span class=hljs-number >0.8022816481887436</span>
ants <span class=hljs-number >0.7866718395036651</span>
icon <span class=hljs-number >0.7769643622031902</span>
ants <span class=hljs-number >0.7633299542410698</span>
icon <span class=hljs-number >0.7849995316673999</span>
ants <span class=hljs-number >0.7692476035458115</span>
icon <span class=hljs-number >0.8022278838905592</span>
ants <span class=hljs-number >0.7981401433813583</span>
icon <span class=hljs-number >0.7829331480423576</span>
ants <span class=hljs-number >0.7350234227770464</span>
icon <span class=hljs-number >0.7960302870982263</span>
ants <span class=hljs-number >0.7587897969101887</span>
icon <span class=hljs-number >0.7949464880607243</span>
ants <span class=hljs-number >0.7238468175069607</span>
icon <span class=hljs-number >0.8004715079602066</span>
ants <span class=hljs-number >0.7683031972517346</span>
icon <span class=hljs-number >0.7848069072434211</span>
ants <span class=hljs-number >0.7486039424706866</span>
icon <span class=hljs-number >0.775226103809265</span>
ants <span class=hljs-number >0.751596807573592</span>
icon <span class=hljs-number >0.8031604155693924</span>
ants <span class=hljs-number >0.7877281192486247</span>
icon <span class=hljs-number >1.0</span>
ants <span class=hljs-number >1.0</span>
icon <span class=hljs-number >0.7673950323965455</span>
ants <span class=hljs-number >0.7551630597562038</span>
icon <span class=hljs-number >0.7734548800820918</span>
ants <span class=hljs-number >0.7603287056802476</span>
final
icon <span class=hljs-number >0.7970946916455773</span>
ants <span class=hljs-number >0.7705394263589164</span></code></pre> <p>Very promising&#33; But I am not ready to share these results with colaborators yet. First I need to </p> <ul> <li><p>convince them to switch to skull stripping, or train with skulls on</p> <li><p>train a full resolution brain model- current results are half res while ants is using the full res images. This should hugely boost ICON&#39;s performance</p> <li><p>compare number of folds</p> <li><p>create an atlas and do both computations in atlas space</p> <li><p>get raul to read my evaluation code and find where I messed up</p> </ul> <h1 id=monai_work_with_basar ><a href="#monai_work_with_basar" class=header-anchor >Monai work with Basar</a></h1> <p>Collaborated with Basar to update usability of ICON with monai. Need to check in again with him to see how that is going</p> <p><a href="https://github.com/uncbiag/ICON/pull/45/files">pull request</a></p> <h1 id=icon_pretrained_models_optimization_for_oai_pipeline ><a href="#icon_pretrained_models_optimization_for_oai_pipeline" class=header-anchor >ICON pretrained models optimization for OAI pipeline</a></h1> <p>Fully integrated Lin&#39;s bug fix about persistent identity maps, released new pre-trained models that are ~300 mb instead of ~1.2GB. Need to put into pypi, then will integrate into oai&#95;analysis&#95;2</p> <p><a href="https://github.com/uncbiag/ICON/pull/44">pull request</a></p> <a href=/Reports/>Back to Reports</a> <div class=page-foot > <div> <a href=https://subdavis.com>subdavis.com </a> <a href=http://forrestli.con>forrestli.com</a> <div class=copyright > &copy; Hastings Greer. Last modified: July 11, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div>