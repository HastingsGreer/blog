<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/tufte.css"> <link rel=stylesheet  href="/css/latex.css"> <link rel=stylesheet  href="/css/adjust.css"> <link rel=stylesheet  href="https://apj.hgreer.com/blog"> <link rel=icon  href="/assets/favicon.png"> <title>Why you should use an itk Transform as the output of your deep registration library</title> <div id=layout > <div id=menu > <ul> <li><a href="/">Home</a> <!-- <li><a href="/FeatureMapICON/">Feature Map Inverse Consistency</a> --> <li><a href="/HatTile/">Aperiodic Tiling with Z3</a> <!-- <li><a href="/ICON/">Inverse Consistent Regstration</a> <li><a href="/Mandelbrot/">Mandelbrot Set Adventures</a> --> <li><a href="/JavascriptMandelbrot/">Mandelbrot Set</a> <li><a href="/TrebuchetSimulator/">Trebuchet Simulator</a> <li><a href="/BadMatrixMultiply/">Bad Matrix Multiplication</a> <li><a href="/GameJam/">Game Jam Games</a> <li><a href="/menu3/">Tags</a> </ul> </div> <div id=main > <div class=franklin-content ><h1 id=why_you_should_use_an_itk_transform_as_the_output_of_your_deep_registration_library ><a href="#why_you_should_use_an_itk_transform_as_the_output_of_your_deep_registration_library" class=header-anchor >Why you should use an itk Transform as the output of your deep registration library</a></h1> <h2 id=need_for_a_standard ><a href="#need_for_a_standard" class=header-anchor >Need for a standard</a></h2> <h2 id=need_to_handle_image_spacings_orientations_and_origins ><a href="#need_to_handle_image_spacings_orientations_and_origins" class=header-anchor >Need to handle image spacings, orientations, and origins</a></h2> <p>Before incorporating registration into downstream research code, we need to face two truths:</p> <p>A: The downstream code needs to handle image orientation and spacing correctly</p> <p>B: You do <em>not</em> want to handle these properties in your deep learning code</p> <p>I know itk it a heavy dependency, but hear me out.</p> <p>People on the medical side want to express positions in physical coordinates: they want to express the location of markers, measure the size of tumors, and register images of different modalities and resolutions</p> <p>The correct resolution for a registration algorithm depends on the approach. It&#39;s not unusual to want to switch between, say, voxelmorph running at 64 x 64 x 64 and demons running at 32 x 32 x 32</p> <p>If we want registration algorithms to be swappable, then the api has to be resolution agnostic</p> <p>The only canidate api that is convenient for application developers to build on is in physical coordinates</p> <p>&#40;This is different from segmentation, where as long as your algorithm </p> <h2 id=the_current_state ><a href="#the_current_state" class=header-anchor >The current state</a></h2> <p>Currently, deformations are either expressed in pixels, or 1 / resolutions, or sometimes 2 / resolutions is identitymap added or not? what is the order of vectors?</p> <h2 id=you_dont_want_to_write_this_code_every_time_you_marry_a_registration_algorithm_to_an_application ><a href="#you_dont_want_to_write_this_code_every_time_you_marry_a_registration_algorithm_to_an_application" class=header-anchor >You don&#39;t want to write this code every time you marry a registration algorithm to an application</a></h2> <p>A&#41; it is a waste of effort</p> <p>B&#41; Mistakes are inevitable</p> <h2 id=a_solution_itktransform_as_a_lingua_franca_between_registration_algorithms_and_application_code ><a href="#a_solution_itktransform_as_a_lingua_franca_between_registration_algorithms_and_application_code" class=header-anchor >A solution: itkTransform as a lingua franca between registration algorithms and application code</a></h2> <div class=page-foot > <div> <a href=https://subdavis.com>subdavis.com </a> <a href=http://forrestli.con>forrestli.com</a> <div class=copyright > &copy; Hastings Greer. Last modified: March 18, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div>